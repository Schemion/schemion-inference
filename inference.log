2025-11-24 21:06:49 - INFO - Inference task 68ad3a58-a128-4a87-8f26-08e1ac16c81d started
2025-11-24 21:06:49 - INFO - select pg_catalog.version()
2025-11-24 21:06:49 - INFO - [raw sql] {}
2025-11-24 21:06:49 - INFO - select current_schema()
2025-11-24 21:06:49 - INFO - [raw sql] {}
2025-11-24 21:06:49 - INFO - show standard_conforming_strings
2025-11-24 21:06:49 - INFO - [raw sql] {}
2025-11-24 21:06:49 - INFO - BEGIN (implicit)
2025-11-24 21:06:49 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:06:49 - INFO - [generated in 0.00030s] {'id_1': UUID('68ad3a58-a128-4a87-8f26-08e1ac16c81d'), 'param_1': 1}
2025-11-24 21:06:49 - INFO - SELECT models.id AS models_id, models.name AS models_name, models.version AS models_version, models.architecture AS models_architecture, models.dataset_id AS models_dataset_id, models.minio_model_path AS models_minio_model_path, models.status AS models_status, models.created_at AS models_created_at 
FROM models 
WHERE models.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:06:49 - INFO - [generated in 0.00176s] {'id_1': UUID('9111fcd4-9282-4829-ae50-d1cffa19e58b'), 'param_1': 1}
2025-11-24 21:06:49 - INFO - Task 68ad3a58-a128-4a87-8f26-08e1ac16c81d - loading image '8e818adf-e768-4c32-821f-41ab511b592e_876eb8ad-e313-4bdc-88b0-d13956d8632f/a0fbdcdd3205c691bafc5879dc8ef0dc.jpg'
2025-11-24 21:06:50 - INFO - Task 68ad3a58-a128-4a87-8f26-08e1ac16c81d - downloading weights to /tmp/tmpgts1yc6a.pt
2025-11-24 21:06:50 - INFO - Task 68ad3a58-a128-4a87-8f26-08e1ac16c81d - creating detector 'yolo'
2025-11-24 21:06:50 - INFO - Task 68ad3a58-a128-4a87-8f26-08e1ac16c81d - running prediction
2025-11-24 21:06:52 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:06:52 - INFO - [cached since 2.754s ago] {'id_1': UUID('68ad3a58-a128-4a87-8f26-08e1ac16c81d'), 'param_1': 1}
2025-11-24 21:06:52 - INFO - UPDATE tasks SET output_path=%(output_path)s, updated_at=%(updated_at)s WHERE tasks.id = %(tasks_id)s::UUID
2025-11-24 21:06:52 - INFO - [generated in 0.00029s] {'output_path': '690a7951-5ede-482d-8e7d-fd736ea68aa7_inference_68ad3a58-a128-4a87-8f26-08e1ac16c81d.json', 'updated_at': datetime.datetime(2025, 11, 24, 21, 6, 52, 680423, tzinfo=datetime.timezone.utc), 'tasks_id': UUID('68ad3a58-a128-4a87-8f26-08e1ac16c81d')}
2025-11-24 21:06:52 - INFO - COMMIT
2025-11-24 21:06:52 - INFO - BEGIN (implicit)
2025-11-24 21:06:52 - INFO - SELECT tasks.id, tasks.user_id, tasks.task_type, tasks.model_id, tasks.dataset_id, tasks.input_path, tasks.output_path, tasks.error_msg, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = %(pk_1)s::UUID
2025-11-24 21:06:52 - INFO - [generated in 0.00016s] {'pk_1': UUID('68ad3a58-a128-4a87-8f26-08e1ac16c81d')}
2025-11-24 21:06:52 - INFO - Inference success
2025-11-24 21:09:33 - INFO - Inference task 89aaf027-88f5-4873-8d31-627c9ba5cad4 started
2025-11-24 21:09:33 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:09:33 - INFO - [cached since 163.8s ago] {'id_1': UUID('89aaf027-88f5-4873-8d31-627c9ba5cad4'), 'param_1': 1}
2025-11-24 21:09:33 - INFO - SELECT models.id AS models_id, models.name AS models_name, models.version AS models_version, models.architecture AS models_architecture, models.dataset_id AS models_dataset_id, models.minio_model_path AS models_minio_model_path, models.status AS models_status, models.created_at AS models_created_at 
FROM models 
WHERE models.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:09:33 - INFO - [cached since 163.8s ago] {'id_1': UUID('0f55252b-1844-4124-9f8e-15cf9484548c'), 'param_1': 1}
2025-11-24 21:09:33 - INFO - Task 89aaf027-88f5-4873-8d31-627c9ba5cad4 - loading image '9a67b26e-516b-42bd-82cb-b1dcba22f28a_876eb8ad-e313-4bdc-88b0-d13956d8632f/a0fbdcdd3205c691bafc5879dc8ef0dc.jpg'
2025-11-24 21:09:33 - INFO - Task 89aaf027-88f5-4873-8d31-627c9ba5cad4 - downloading weights to /tmp/tmpbkcnl50g.pth
2025-11-24 21:09:34 - INFO - Task 89aaf027-88f5-4873-8d31-627c9ba5cad4 - creating detector 'faster_rcnn'
2025-11-24 21:09:34 - ERROR - Task 89aaf027-88f5-4873-8d31-627c9ba5cad4 - inference failed: Unsupported architecture: 'faster_rcnn'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo
Traceback (most recent call last):
  File "/app/app/core/use_cases/inference_use_case.py", line 74, in execute
    detector = self.detector_factory.create(architecture=architecture, classes=classes)
  File "/app/app/infrastructure/factories/detector_factory.py", line 24, in create
    raise ValueError(
ValueError: Unsupported architecture: 'faster_rcnn'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo
2025-11-24 21:09:34 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:09:34 - INFO - [cached since 164.4s ago] {'id_1': UUID('89aaf027-88f5-4873-8d31-627c9ba5cad4'), 'param_1': 1}
2025-11-24 21:09:34 - INFO - UPDATE tasks SET error_msg=%(error_msg)s, updated_at=%(updated_at)s WHERE tasks.id = %(tasks_id)s::UUID
2025-11-24 21:09:34 - INFO - [generated in 0.00018s] {'error_msg': "Unsupported architecture: 'faster_rcnn'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo", 'updated_at': datetime.datetime(2025, 11, 24, 21, 9, 34, 343286, tzinfo=datetime.timezone.utc), 'tasks_id': UUID('89aaf027-88f5-4873-8d31-627c9ba5cad4')}
2025-11-24 21:09:34 - INFO - COMMIT
2025-11-24 21:09:34 - INFO - BEGIN (implicit)
2025-11-24 21:09:34 - INFO - SELECT tasks.id, tasks.user_id, tasks.task_type, tasks.model_id, tasks.dataset_id, tasks.input_path, tasks.output_path, tasks.error_msg, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = %(pk_1)s::UUID
2025-11-24 21:09:34 - INFO - [cached since 161.6s ago] {'pk_1': UUID('89aaf027-88f5-4873-8d31-627c9ba5cad4')}
2025-11-24 21:18:04 - INFO - Inference task 188cf4dd-33d9-4a29-9e42-b2a9843b0338 started
2025-11-24 21:18:04 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:18:04 - INFO - [cached since 674.3s ago] {'id_1': UUID('188cf4dd-33d9-4a29-9e42-b2a9843b0338'), 'param_1': 1}
2025-11-24 21:18:04 - INFO - SELECT models.id AS models_id, models.name AS models_name, models.version AS models_version, models.architecture AS models_architecture, models.dataset_id AS models_dataset_id, models.minio_model_path AS models_minio_model_path, models.status AS models_status, models.created_at AS models_created_at 
FROM models 
WHERE models.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:18:04 - INFO - [cached since 674.4s ago] {'id_1': UUID('0f55252b-1844-4124-9f8e-15cf9484548c'), 'param_1': 1}
2025-11-24 21:18:04 - INFO - Task 188cf4dd-33d9-4a29-9e42-b2a9843b0338 - loading image 'd674b0de-1522-4117-aa07-ea8391660a82_876eb8ad-e313-4bdc-88b0-d13956d8632f/a0fbdcdd3205c691bafc5879dc8ef0dc.jpg'
2025-11-24 21:18:04 - INFO - Task 188cf4dd-33d9-4a29-9e42-b2a9843b0338 - downloading weights to /tmp/tmpd4m9jzaj.pth
2025-11-24 21:18:04 - INFO - Task 188cf4dd-33d9-4a29-9e42-b2a9843b0338 - creating detector 'faster_rcnn_resnet50_fpn_v2'
2025-11-24 21:18:04 - ERROR - Task 188cf4dd-33d9-4a29-9e42-b2a9843b0338 - inference failed: Unsupported architecture: 'faster_rcnn_resnet50_fpn_v2'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo
Traceback (most recent call last):
  File "/app/app/core/use_cases/inference_use_case.py", line 74, in execute
    detector = self.detector_factory.create(architecture=architecture, classes=classes)
  File "/app/app/infrastructure/factories/detector_factory.py", line 24, in create
    raise ValueError(
ValueError: Unsupported architecture: 'faster_rcnn_resnet50_fpn_v2'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo
2025-11-24 21:18:04 - INFO - SELECT tasks.id AS tasks_id, tasks.user_id AS tasks_user_id, tasks.task_type AS tasks_task_type, tasks.model_id AS tasks_model_id, tasks.dataset_id AS tasks_dataset_id, tasks.input_path AS tasks_input_path, tasks.output_path AS tasks_output_path, tasks.error_msg AS tasks_error_msg, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-11-24 21:18:04 - INFO - [cached since 675s ago] {'id_1': UUID('188cf4dd-33d9-4a29-9e42-b2a9843b0338'), 'param_1': 1}
2025-11-24 21:18:04 - INFO - UPDATE tasks SET error_msg=%(error_msg)s, updated_at=%(updated_at)s WHERE tasks.id = %(tasks_id)s::UUID
2025-11-24 21:18:04 - INFO - [cached since 510.6s ago] {'error_msg': "Unsupported architecture: 'faster_rcnn_resnet50_fpn_v2'. Supported: resnet50_fpn, resnet50_fpn_v2, mobilenet_v3_large_fpn, mobilenet_v3_large_320_fpn, yolo", 'updated_at': datetime.datetime(2025, 11, 24, 21, 18, 4, 977070, tzinfo=datetime.timezone.utc), 'tasks_id': UUID('188cf4dd-33d9-4a29-9e42-b2a9843b0338')}
2025-11-24 21:18:04 - INFO - COMMIT
2025-11-24 21:18:04 - INFO - BEGIN (implicit)
2025-11-24 21:18:04 - INFO - SELECT tasks.id, tasks.user_id, tasks.task_type, tasks.model_id, tasks.dataset_id, tasks.input_path, tasks.output_path, tasks.error_msg, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = %(pk_1)s::UUID
2025-11-24 21:18:04 - INFO - [cached since 672.3s ago] {'pk_1': UUID('188cf4dd-33d9-4a29-9e42-b2a9843b0338')}
